<!DOCTYPE html><html lang=zh-CN><head hexo-theme=https://github.com/volantis-x/hexo-theme-volantis/tree/4.3.1><meta charset=utf-8><meta http-equiv=x-dns-prefetch-control content=on><link rel=dns-prefetch href=https://cdn.jsdelivr.net><link rel=preconnect href=https://cdn.jsdelivr.net crossorigin><meta name=renderer content=webkit><meta name=force-rendering content=webkit><meta http-equiv=X-UA-Compatible content="IE=Edge,chrome=1"><meta name=HandheldFriendly content=True><meta name=apple-mobile-web-app-capable content=yes><meta name=viewport content="width=device-width, initial-scale=1, maximum-scale=1"><link rel=preload href=/css/first.css as=style><title>数据治理：面临的挑战与应对策略 - 小冰 RSSHub</title><link rel=alternate href=/atom.xml title="小冰 RSSHub" type=application/atom+xml><meta name=referrer content=no-referrer><link rel=stylesheet href=/css/diy.css><link rel=stylesheet href=/css/first.css><link rel=stylesheet href=/css/style.css media=print onload="this.media='all';this.onload=null"><noscript><link rel=stylesheet href=/css/style.css></noscript><script id=loadcss></script><script>
if (/*@cc_on!@*/false || (!!window.MSInputMethodContext && !!document.documentMode))
    document.write(
	'<style>'+
		'html{'+
			'overflow-x: hidden !important;'+
			'overflow-y: hidden !important;'+
		'}'+
		'.kill-ie{'+
			'text-align:center;'+
			'height: 100%;'+
			'margin-top: 15%;'+
			'margin-bottom: 5500%;'+
		'}'+
	'</style>'+
    '<div class="kill-ie">'+
        '<h1><b>抱歉，您的浏览器无法访问本站</b></h1>'+
        '<h3>微软已经于2016年终止了对 Internet Explorer (IE) 10 及更早版本的支持，<br/>'+
        '继续使用存在极大的安全隐患，请使用当代主流的浏览器进行访问。</h3><br/>'+
        '<a target="_blank" rel="noopener" href="https://www.microsoft.com/zh-cn/WindowsForBusiness/End-of-IE-support"><strong>了解详情 ></strong></a>'+
    '</div>');
</script><noscript><style>
		html{
			overflow-x: hidden !important;
			overflow-y: hidden !important;
		}
		.kill-noscript{
			text-align:center;
			height: 100%;
			margin-top: 15%;
			margin-bottom: 5500%;
		}
	</style><div class=kill-noscript><h1><b>抱歉，您的浏览器无法访问本站</b></h1><h3>本页面需要浏览器支持（启用）JavaScript</h3><br><a target=_blank rel=noopener href="https://www.baidu.com/s?wd=启用JavaScript"><strong>了解详情 ></strong></a></div></noscript></head><body><header id=l_header class="l_header always shadow blur show"><div class=container><div id=wrapper><div class=nav-sub><p class=title></p><ul class="switcher nav-list-h m-phone" id=pjax-header-nav-list><li><a id=s-comment class="fas fa-comments fa-fw" target=_self href=javascript:void(0)></a></li><li><a id=s-toc class="s-toc fas fa-list fa-fw" target=_self href=javascript:void(0)></a></li></ul></div><div class=nav-main><a class="title flat-box" target=_self href="/"><img no-lazy class=logo src=https://cdn.jsdelivr.net/gh/volantis-x/cdn-org/blog/Logo-NavBar@3x.png></a><div class="menu navigation"><ul class="nav-list-h m-pc"><li><a class="menuitem flat-box faa-parent animated-hover" href="/" id=home><i class="fas fa-home fa-fw fa-fw"></i> 主页</a></li><li><a class="menuitem flat-box faa-parent animated-hover" href="/categories/%E5%8D%9A%E5%AE%A2/" id=categoriesE58D9AE5AEA2><i class="fas fa-rss fa-fw"></i> 博客订阅</a></li><li><a class="menuitem flat-box faa-parent animated-hover" href="/categories/%E6%96%B0%E5%AA%92%E4%BD%93/" id=categoriesE696B0E5AA92E4BD93><i class="fas fa-podcast fa-fw fa-fw"></i> 新媒体</a></li><li><a class="menuitem flat-box faa-parent animated-hover" href="/categories/%E4%BA%8C%E6%AC%A1%E5%85%83/" id=categoriesE4BA8CE6ACA1E58583><i class="fas fa-heart fa-fw fa-fw"></i> 二次元</a></li><li><a class="menuitem flat-box faa-parent animated-hover" href="/categories/%E6%B8%B8%E6%88%8F/" id=categoriesE6B8B8E6888F><i class="fa fa-gamepad fa-fw fa-fw"></i> 游戏</a></li><li><a class="menuitem flat-box faa-parent animated-hover" href="/categories/%E5%9B%BE%E7%89%87/" id=categoriesE59BBEE78987><i class="fas fa-puzzle-piece fa-fw fa-fw"></i> 图片</a></li><li><a class="menuitem flat-box faa-parent animated-hover" href="/categories/%E8%AE%BE%E8%AE%A1/" id=categoriesE8AEBEE8AEA1><i class="fas fa-magic fa-fw fa-fw"></i> 设计</a></li><li><a class="menuitem flat-box faa-parent animated-hover" href="/categories/%E7%BC%96%E7%A8%8B/" id=categoriesE7BC96E7A88B><i class="fas fa-code fa-fw fa-fw"></i> 编程</a></li><li><a class="menuitem flat-box faa-parent animated-hover" href="/categories/%E9%87%91%E8%9E%8D/" id=categoriesE98791E89E8D><i class="fas fa-key fa-fw fa-fw"></i> 金融</a></li><li><a class="menuitem flat-box faa-parent animated-hover" href="/categories/%E7%A4%BE%E4%BA%A4%E5%AA%92%E4%BD%93/" id=categoriesE7A4BEE4BAA4E5AA92E4BD93><i class="fas fa-users fa-fw fa-fw"></i> 社交媒体</a></li><li><a class="menuitem flat-box faa-parent animated-hover" href="/categories/%E9%98%85%E8%AF%BB/" id=categoriesE99885E8AFBB><i class="fas fa-book fa-fw fa-fw"></i> 阅读</a></li><li><a class="menuitem flat-box faa-parent animated-hover" href="/categories/%E5%AD%A6%E4%B9%A0/" id=categoriesE5ADA6E4B9A0><i class="fas fa-graduation-cap fa-fw fa-fw"></i> 学习</a></li></ul></div><div class=m_search><form name=searchform class="form u-search-form"><i class="icon fas fa-search fa-fw"></i> <input type=text class="input u-search-input" placeholder=Search...></form></div><ul class="switcher nav-list-h m-phone"><li><a class="s-search fas fa-search fa-fw" target=_self href=javascript:void(0)></a></li><li><a class="s-menu fas fa-bars fa-fw" target=_self href=javascript:void(0)></a><ul class="menu-phone list-v navigation white-box"><li><a class="menuitem flat-box faa-parent animated-hover" href="/" id=home><i class="fas fa-home fa-fw fa-fw"></i> 主页</a></li><li><a class="menuitem flat-box faa-parent animated-hover" href="/categories/%E5%8D%9A%E5%AE%A2/" id=categoriesE58D9AE5AEA2><i class="fas fa-rss fa-fw"></i> 博客订阅</a></li><li><a class="menuitem flat-box faa-parent animated-hover" href="/categories/%E6%96%B0%E5%AA%92%E4%BD%93/" id=categoriesE696B0E5AA92E4BD93><i class="fas fa-podcast fa-fw fa-fw"></i> 新媒体</a></li><li><a class="menuitem flat-box faa-parent animated-hover" href="/categories/%E4%BA%8C%E6%AC%A1%E5%85%83/" id=categoriesE4BA8CE6ACA1E58583><i class="fas fa-heart fa-fw fa-fw"></i> 二次元</a></li><li><a class="menuitem flat-box faa-parent animated-hover" href="/categories/%E6%B8%B8%E6%88%8F/" id=categoriesE6B8B8E6888F><i class="fa fa-gamepad fa-fw fa-fw"></i> 游戏</a></li><li><a class="menuitem flat-box faa-parent animated-hover" href="/categories/%E5%9B%BE%E7%89%87/" id=categoriesE59BBEE78987><i class="fas fa-puzzle-piece fa-fw fa-fw"></i> 图片</a></li><li><a class="menuitem flat-box faa-parent animated-hover" href="/categories/%E8%AE%BE%E8%AE%A1/" id=categoriesE8AEBEE8AEA1><i class="fas fa-magic fa-fw fa-fw"></i> 设计</a></li><li><a class="menuitem flat-box faa-parent animated-hover" href="/categories/%E7%BC%96%E7%A8%8B/" id=categoriesE7BC96E7A88B><i class="fas fa-code fa-fw fa-fw"></i> 编程</a></li><li><a class="menuitem flat-box faa-parent animated-hover" href="/categories/%E9%87%91%E8%9E%8D/" id=categoriesE98791E89E8D><i class="fas fa-key fa-fw fa-fw"></i> 金融</a></li><li><a class="menuitem flat-box faa-parent animated-hover" href="/categories/%E7%A4%BE%E4%BA%A4%E5%AA%92%E4%BD%93/" id=categoriesE7A4BEE4BAA4E5AA92E4BD93><i class="fas fa-users fa-fw fa-fw"></i> 社交媒体</a></li><li><a class="menuitem flat-box faa-parent animated-hover" href="/categories/%E9%98%85%E8%AF%BB/" id=categoriesE99885E8AFBB><i class="fas fa-book fa-fw fa-fw"></i> 阅读</a></li><li><a class="menuitem flat-box faa-parent animated-hover" href="/categories/%E5%AD%A6%E4%B9%A0/" id=categoriesE5ADA6E4B9A0><i class="fas fa-graduation-cap fa-fw fa-fw"></i> 学习</a></li></ul></li></ul></div></div></div></header><div id=l_body><div id=l_cover><div id=full class="cover-wrapper post dock" style="display: none;"><div class="cover-bg lazyload placeholder" data-bg="https://uploadbeta.com/api/pictures/random/?key=BingEverydayWallpaperPicture"></div><div class=cover-body><div class=top><p class=title>Volantis</p></div><div class=bottom><div class="menu navigation"><div class=list-h><a href="/v4/getting-started/" id=v4getting-started><img src=https://cdn.jsdelivr.net/gh/twitter/twemoji@13.0/assets/svg/1f5c3.svg><p>文档</p></a> <a href="/faqs/" id=faqs><img src=https://cdn.jsdelivr.net/gh/twitter/twemoji@13.0/assets/svg/1f516.svg><p>帮助</p></a> <a href="/examples/" id=examples><img src=https://cdn.jsdelivr.net/gh/twitter/twemoji@13.0/assets/svg/1f396.svg><p>示例</p></a> <a href="/contributors/" id=contributors><img src=https://cdn.jsdelivr.net/gh/twitter/twemoji@13.0/assets/svg/1f389.svg><p>社区</p></a> <a href="/archives/" id=archives><img src=https://cdn.jsdelivr.net/gh/twitter/twemoji@13.0/assets/svg/1f4f0.svg><p>博客</p></a> <a target=_blank rel=noopener href="https://github.com/volantis-x/hexo-theme-volantis/" id=https:githubcomvolantis-xhexo-theme-volantis><img src=https://cdn.jsdelivr.net/gh/twitter/twemoji@13.0/assets/svg/1f9ec.svg><p>源码</p></a></div></div></div></div><div id=scroll-down style="display: none;"><i class="fa fa-chevron-down scroll-down-effects"></i></div></div></div><div id=safearea><div class=body-wrapper id=pjax-container><div class=l_main><article class="article post white-box reveal md shadow article-type-post" id=post itemscope itemprop=blogPost><div class=headimg-div><a class=headimg-a><img class=headimg src=https://image.woshipm.com/wp-files/2019/11/98UODTVcCMlFQ5OlrFAh.jpg></a></div><div class=article-meta id=top><a title=数据治理：面临的挑战与应对策略 href=/p/a656.html><img class=thumbnail src=https://image.woshipm.com/wp-files/2019/11/98UODTVcCMlFQ5OlrFAh.jpg></a><h1 class=title>数据治理：面临的挑战与应对策略</h1><div class=new-meta-box><div class="new-meta-item author"><a class=author target=_blank href="https://docs.rsshub.app/" rel="nofollow noopener"><img no-lazy src=https://i.loli.net/2019/04/23/5cbeb7e41414c.png><p>RSSHub</p></a></div><div class="new-meta-item category"><a class=notlink><i class="fas fa-folder-open fa-fw" aria-hidden=true></i> <a class=category-link href="/categories/%E6%96%B0%E5%AA%92%E4%BD%93/">新媒体</a><span class=sep></span><a class=category-link href="/categories/%E6%96%B0%E5%AA%92%E4%BD%93/%E4%BA%BA%E4%BA%BA%E9%83%BD%E6%98%AF%E4%BA%A7%E5%93%81%E7%BB%8F%E7%90%86/">人人都是产品经理</a><span class=sep></span><a class=category-link href="/categories/%E6%96%B0%E5%AA%92%E4%BD%93/%E4%BA%BA%E4%BA%BA%E9%83%BD%E6%98%AF%E4%BA%A7%E5%93%81%E7%BB%8F%E7%90%86/%E7%94%A8%E6%88%B7%E6%94%B6%E8%97%8F/">用户收藏</a></a></div><div class="new-meta-item date"><a class=notlink><i class="fas fa-calendar-alt fa-fw" aria-hidden=true></i><p>发布于：2019年11月7日</p></a></div><div class="new-meta-item browse leancloud"><a class=notlink><div id=lc-pv data-title=数据治理：面临的挑战与应对策略 data-path=/p/a656.html><i class="fas fa-eye fa-fw" aria-hidden=true></i><span id=number><i class="fas fa-circle-notch fa-spin fa-fw" aria-hidden=true></i></span> 次浏览</div></a></div></div></div><div><blockquote><p>本文根据神策数据联合创始人 & CTO 曹犟发表的《数据治理中的一些挑战与应用》主题演讲整理而成。</p></blockquote><p><img data-action=zoom class="size-full wp-image-3060915 aligncenter lazyload" src=https://image.woshipm.com/wp-files/2019/11/98UODTVcCMlFQ5OlrFAh.jpg data-srcset=https://image.woshipm.com/wp-files/2019/11/98UODTVcCMlFQ5OlrFAh.jpg srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" width=800 height=450 referrerpolicy=no-referrer></p><p>本文将为你重点介绍：</p><ul><li>数据治理的概念与重要性</li><li>数据治理面临的挑战</li><li>数据治理与组织架构</li><li>数据治理中的应对</li></ul><p>许多大数据公司在过去一段时间都得到了较好的发展，究其原因是因为恰逢专注于业务流的信息化建设正在向数据化转型。</p><p>但在很多时候，数据其实还只是 IT 化的“副产品”，早期的工作思路仍然围绕如何将业务 IT 化，而数据只是这个过程中自然而然产生的结果，即所谓的“副产品”。</p><p>由于在数据生产的过程中并未做到足够重视，数据质量与可靠性则很难得到保证，这也是数据治理在现在得以被重视的重要原因。</p><p>在业务 IT 化的过程中，企业通过第三方厂商、自研等方式构建多种数据系统，采用多种系统中的数据化治理，是实现数据效能、数据驱动业务的关键步骤。</p><p>早期，企业用信息技术去构建业务流，而现在，我们试图用信息技术，特别是互联网行业中的一些大数据处理以及分布式处理技术构建数据流，但在构建过程中，过多强调技术本身而忽视了对数据的治理。</p><p>数据治理是整体性问题，并非仅是技术问题，市面上数不胜数的商业组件可以解决如何对数据进行存储、查询等问题，但是在实际的业务情况下对于数据治理这样一个系统性工程，目前却并无现成的产品或技术可以直接解决。</p><p><img data-action=zoom class="rich_pages js_insertlocalimg aligncenter lazyload" src=https://image.woshipm.com/wp-files/2019/11/PdWaKb7Zz5dq1VQwGhJW.jpg data-srcset=https://image.woshipm.com/wp-files/2019/11/PdWaKb7Zz5dq1VQwGhJW.jpg srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" referrerpolicy=no-referrer></p><p>我们可以尝试用数据治理的角度来解读上图。</p><p>构建数据流的过程，很大意义上是为了解决分布在 IT 系统里各个不同子系统之间的数据孤岛问题，用一条完整的数据流将不同子系统之间的数据孤岛打通，同时应用于不同的应用场景，这个打通的过程，就是某种意义上的数据治理。这也反映了我之前尤为推崇的一个观点——构建数据仓库本身就是一个数据治理的过程。</p><p>另外，对于数据的本质，我一直推崇如下两个定义：第一“信息是用来消除不确定性的”，第二“大数据的本质，就是用信息来消除不确定性”。</p><p>同样，对于数据驱动在业务决策和产品智能两大方面的应用，也都将建立在数据治理的基础上才有意义。</p><p><img data-action=zoom class="rich_pages js_insertlocalimg aligncenter lazyload" src=https://image.woshipm.com/wp-files/2019/11/95uISPS59zcqeknIc0FE.jpg data-srcset=https://image.woshipm.com/wp-files/2019/11/95uISPS59zcqeknIc0FE.jpg srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" referrerpolicy=no-referrer></p><h2 id=toc-1>一、什么是数据治理？</h2><p>数据治理的本质是组织对数据的可用性、完整性和安全性的整体管理。</p><h3>1. 数据治理的本质</h3><p>可用性指数据可用、可信且有质量保证，不会因为分析结果的准确性造成偏差，从业者可以放心地根据数据结果做业务决策；完整性分为两个方面，一方面指数据需覆盖各类数据应用的需要，另一方面指不会因为数据治理没有到位而造成数据资产的流失，也即影响数据资产的积累，这也是神策数据在创业伊始便开展私有化部署的原因；安全性指治理和分享过程需安全可控，不侵犯用户隐私，且不会给组织留下安全隐患。</p><h3>2. 数据治理的重要性</h3><p>数据治理是所有数据应用的根基，数据治理的好坏直接影响所有数据应用的价值。</p><p>无论是基于数据看报表，还是做交互式的多维分析，还是做更复杂的个性化推荐，所有的数据应用都需要有一个良好的数据治理结果。</p><p>神策本身就拥有一款推荐产品——神策智能推荐，通过这款产品的实践，我们发现，它的实施周期相比其它几个产品普遍偏长，这也是因为个性化推荐对于数据的质量和准确性要求相对更高。</p><p>简而言之，数据应用做得越深入，所需数据就会更多，对数据质量也会有更高的要求。</p><p><strong>数据治理是组织数据资产沉淀的基础，数据治理的好坏直接决定了组织的数据资产能否得到沉淀，能否充分地发挥价值。</strong></p><p>经常会有客户主动来询问：</p><blockquote><p>“领导说我们要做一个数据中台沉淀数据，但不知具体原因，亦不清楚搭建中台的具体目的，可能要等搭建之后寻找数据价值时，再去探索具体应用。”</p></blockquote><p>个人认为，在经费条件允许的情况下，当然可以将企业的所有数据整合在一起，通过良好的权限管控，充分的共享，聚合所有的业务部门一起去探索数据的应用，因为数据中台本身就承载着组织内部所有数据的整合分享角色。</p><h2 id=toc-2>二、数据治理面临的挑战</h2><p>本部分的内容将数据治理面临的挑战分为两类，一类因“技术”而起，一类因“人”而起。</p><p>由客观的技术问题对数据治理带来的挑战普遍较好解决，比如如何采集数据、如何存储数据等，都可通过更先进的工具、更新的技术等方式解决。</p><p>而由人或组织架构带来的问题相对复杂，它的背后包含的是企业在文化、流程上的问题，可以通过以下实例说明。</p><h3>1. 多业务系统多数据源的整合挑战</h3><p>企业想要做的数据应用越多，所需的数据就会越多，所要去获取的数据源也会增多，而相应的数据处理也会越多，这是一个极为显而易见的问题。</p><p>对于神策数据而言，我们在数据应用方面相对“单纯”，主要针对用户行为领域，采集用户行为数据，从客户端、服务端、数据库等做对接。</p><p>但即使是这样一个限定特殊领域的应用，我们在整合多方面数据源上也会碰到非常多的挑战，可想而知在面对多业务系统多数据源的情况下将更加困难。</p><p><img data-action=zoom class="rich_pages js_insertlocalimg aligncenter lazyload" src=https://image.woshipm.com/wp-files/2019/11/pjwgEW20z5jpOHWDqBCi.jpg data-srcset=https://image.woshipm.com/wp-files/2019/11/pjwgEW20z5jpOHWDqBCi.jpg srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" referrerpolicy=no-referrer></p><h3>2. 数据采集技术上的挑战</h3><p>近年来，许多公司都在尝试将自己的业务线上化，都需要通过数据对用户进行分析与运营，如何精准采集可用的用户数据以及其他相关数据，都将是数据采集在技术层面上面临的挑战。</p><p><img data-action=zoom class="rich_pages js_insertlocalimg aligncenter lazyload" src=https://image.woshipm.com/wp-files/2019/11/S4f72B3G01QHdk1DgcUW.jpg data-srcset=https://image.woshipm.com/wp-files/2019/11/S4f72B3G01QHdk1DgcUW.jpg srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" referrerpolicy=no-referrer></p><h3>3. 用户隐私与安全挑战</h3><p>用户隐私与安全不仅是对技术挑战，更多的是一种意识上的挑战。企业需要准确把控数据采集的红线，比如针对欧盟范围内的国际业务，就需要参考 GDPR 的相关规范。</p><p>在国内，很多银行券商等企业也同样拥有一套完善的数据合规要求，甚至已经细化到“某个特定字段对于某一个特定人可看但不可下载”的程度，这些都是需要在进行数据治理时考虑的因素。另外，如果需要在公网传输交换数据，也同样需要思考数据如何防止窃取和伪造的问题</p><p><img data-action=zoom class="rich_pages js_insertlocalimg aligncenter lazyload" src=https://image.woshipm.com/wp-files/2019/11/BLtQG8tPqBbuf5z9q0LP.jpg data-srcset=https://image.woshipm.com/wp-files/2019/11/BLtQG8tPqBbuf5z9q0LP.jpg srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" referrerpolicy=no-referrer></p><h3>4. 组织架构与部门隔阂带来的配合</h3><p>部分组织在数据治理的过程中速度过慢，成效不好，其中一个很重要的原因是权责、部门配合等方面存在问题。很多情况下，生产数据、使用数据、分析数据的工作人员分布在不同的职能线与部门，角色不同，立场也不同，这些客观存在的影响因素都会影响整个数据治理的最终结果。</p><p><img data-action=zoom class="rich_pages js_insertlocalimg aligncenter lazyload" src=https://image.woshipm.com/wp-files/2019/11/lMjohKS7PhYMexcpdewc.jpg data-srcset=https://image.woshipm.com/wp-files/2019/11/lMjohKS7PhYMexcpdewc.jpg srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" referrerpolicy=no-referrer></p><h3>5.业务持续迭代中带来的挑战</h3><p>在互联网行业中，尤其是业务迭代较为迅速的团队里，通常存在“1.0 版本的数据质量最优，1.1 版本不行，2.0 版本完全不可用”的说法，说明第一次做数据治理时，极重视数据质量，会有完善的流程来保证埋点的准确性，本身也没有太多的包袱；而在后续的产品迭代中，如果流程和标准的迭代相对滞后，整个数据治理的结果也会随着受影响，最终导致整个数据质量低劣，直至所谓的“完全不可用”。</p><p><img data-action=zoom class="rich_pages js_insertlocalimg aligncenter lazyload" src=https://image.woshipm.com/wp-files/2019/11/bkywvVxoppks391IkdeX.jpg data-srcset=https://image.woshipm.com/wp-files/2019/11/bkywvVxoppks391IkdeX.jpg srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" referrerpolicy=no-referrer></p><p>下面举两个具体实例说明。</p><p><strong>实例 1.</strong></p><p>某公司的业务部门向第三方数据分析平台提出数据需求，该公司内部有多个 App 频道，每个频道隶属于一个单独的部门，而第三方数据分析平台在埋点采集阶段需要不同部门的团队相互配合。由于缺乏统一各部门需求与任务的统筹角色，实施过程中很难清楚划分相关责任，再加上管理、测试等工具的缺失，最终导致每次发版都会发生埋点丢失和报错。</p><p><strong>实例 2.</strong></p><p>某企业的所有用户相关数据分散在不同的系统里面，试图通过第三方数据分析平台整合统一的用户标签数据系统。然而在收集数据的过程中，每跨一次部门就需要提一次全套的审批流程，好不容易收集齐各部门各系统中的数据之后，却发现数据统计口径不一致，无法得到一个公司统一的用户标签数据。</p><h2 id=toc-3>三、数据治理与组织架构</h2><p>上述内容已经提到关于组织架构的内容，因其重要性将在本部分单独说明。</p><h3>1. 数据治理是一个动态的过程</h3><p>数据治理实际反映的是组织问题、文化问题，这也是许多公司为了明确权责划分而建立数据治理委员会的原因。同时，还需要明确的程序与执行程序的计划，明确的程序指对数据进行治理所需经历的阶段、问题有明细的了解，执行程序的计划指每一步需要解决哪些问题。当公司的主流业务发生变化时，组织架构会随之改变，接而带来数据治理层面的变更，所以，数据治理是一个动态的过程，伴随整个业务变更与组织架构变更。</p><h3>2. 数据治理中的两个核心角色</h3><ul><li>第一，数据使用者，通常集中在产品经理、数据分析师、营销经理、运营经理等岗位，有查看报表、数据分析、用户画像、用户运营等需求，他们属于数据治理的受益者。</li><li>第二，数据生产者，通常集中在前端开发、后端开发、数据工程师、ETL 工程师，有埋点、打日志、做数据 ETL 的需求，他们属于数据治理的付出者，可能看不到直接收益，反而增加工作负担。</li></ul><p>由于数据使用者属于数据治理中受益的一方，多数情况下需由其来推动数据治理任务进行。</p><p>在神策数据的具体实践中，我们非常强调对客户接口人，通常情况下也就是数据使用者的培训，由他去推动整个流程，去了解数据生产者的实际情况，从而让数据治理工作更好地进行。</p><h2 id=toc-4>四、数据治理中的应对</h2><p>首先，数据治理的核心认识是，数据治理是一个持续并且长久的一个过程，不同的产品可以解决比如采集、传输等数据治理层面上的不同问题，但并不存在一款所谓的“数据治理产品”，可以用来解决所有问题。</p><p>其次，数据治理的整体方法论是“从应用倒推”。先确定数据应用、数据资产的需求，接着确定需要哪些数据，之后确定需要从哪种数据源获取数据，最终确定具体的数据治理方案。</p><p>神策凭借近年在实际业务中的经验，围绕用户行为分析领域，总结出一套数据治理方法论。</p><p><img data-action=zoom class="rich_pages js_insertlocalimg aligncenter lazyload" src=https://image.woshipm.com/wp-files/2019/11/trlDriKEzWeRuWiBtQMU.jpg data-srcset=https://image.woshipm.com/wp-files/2019/11/trlDriKEzWeRuWiBtQMU.jpg srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" referrerpolicy=no-referrer></p><ul><li>第一步，确定分析需求。通过了解数据使用者需要看哪些指标、用在哪些场景、使用哪些分析模型等方面来了解具体的数据使用需求，完成需求梳理。</li><li>第二步，映射数据模型。在该步骤需确定采集的事件和属性，并完成事件设计。</li><li>第三步，确定数据采集技术方案。根据要采的事件和属性，结合现有实际业务系统，去确定到底要从何种系统里以何种技术方案采集数据。</li><li>第四步，数据采集与集成。这一步就是指具体的开发、集成工作，包括完成相应的 SDK 集成、数据采集工具的开发、数据 ETL 开发等。</li><li>第五步，数据校验和上线。这一步中需要使用必要的测试工具、利用埋点管理平台做数据对比等。</li></ul><p>下面，举例说明数据治理的三大原则：</p><h3>数据治理原则 1：不要先污染后治理，要从源头控制</h3><p>在创立神策数据之前，我们曾长期参与百度的日志数据相关的工作。在最开始的阶段，所谓的日志处理就是通过中控机器，从不同的业务系统里下载文本日志，跑完脚本后生成报表，再通过邮件的形式分发。</p><p>2008 年，团队解决了之前方案中的技术架构的问题，把以前的单机系统变成了分布式系统，提高了整体性能与计算效率，用分布式的方式下载日志，用分布式的方式来计算报表。但是，我们本质上只提供了一个计算的调度平台。就数据本身而言，没有人知道这些海量数据其中的细节，数据没有得到充分的复用，造成了许多计算资源的浪费。所以，这部分的工作其实只是解决了一个技术问题，但并没有解决任何数据治理方面的问题。</p><p>意识到数据治理的问题之后，团队中开始了百度用户数据仓库的构建工作。有工程师每天将文本日志用程序转成结构化日志，并在进行必要的数据清洗、Union、Join 等 ETL 的工作之后，将这些结构化日志统一映射到一张大表（今天 event 模型前身），并对外提供集中访问。</p><p>但随着产品线不断增多，入库周期变得更长，到后期，每增加一条产品线，都需要付出至少一周时间去解决。同时，由于数据在产生后需要做 ETL，从产生到传输到统一的 Hadoop 集群需要时间， ETL 的计算也同样需要时间，即使在最佳情况下也只能保证半小时的时效性。</p><p>这是一个典型的数据“先污染后治理”的例子，不仅在治理上需要付出更多的代价和成本，数据本身的可用性和时效性也会受到影响。</p><p>之后，我们尝试通过推行全百度统一的 Logging 平台，从打日志开始就保证数据的正确性，并且直接将数据传输到分布式集群上以保证数据的可用，这就是从源头来治理数据的思路。</p><p>在创立神策之后，我们就充分吸取了这些教训，通过 SDK 或者其他工具去严格控制数据埋点格式及数据模型，尽最大努力减少 ETL 的代价，从而保证查询时效性与导入时效性。所以，数据治理要从源头开始，不要先污染后治理。</p><h3>数据治理原则 2：数据治理的过程要贯穿到整个业务迭代的过程中</h3><p>以软件开发流程为例。</p><p>首先，在产品需求阶段，同样需要去明确数据需求。在具体设计阶段，完成产品交互系统架构变更的同时，去确定要加哪些日志、字段等。</p><p>在实际开发阶段，完成相应的代码开发、日志变更，单元测试应包括相应的日志变更部分，并进行日志审计，不要将埋点当成一个单独的开发任务，而是伴随的过程。在</p><p>测试阶段，当测试整体性能的正确性的同时，测试数据、日志的正确性，确保功能符合预期、日志打印正确，可以满足分需求。</p><p>在上线阶段，要实际查看上线的埋点、日志是否正确，并对功能进行确认。</p><p>最后，在项目总结阶段，用数据说明转化率变化、流程优化情况，对功能完成程度的总结，尝试真正地用数据说话。</p><h3>数据治理原则 3：以产品化、组件化的思路来解决，不能依赖于人工</h3><p>以产品的方式解决客户端数据采集问题。</p><p>神策的开源 SDK 被许多业界同仁参考学习，究其原因是因为它用产品的方式解决客户端数据采集问题的思维，无论是电商、社交、金融、游戏，还是哪一种产品，都会在客户端采集用户数据时面临匿名 ID 生成、基础属性采集、数据打包压缩加密、本地缓存、网络传输、时间校准、根据数据模型限定了采集数据的 Schema、通过全埋点等方式提供了对常见数据的自动采集功能、结合后端提供了对于采集端调试功能等场景，所以，可以用产品思维来解决的问题，不依赖人工。</p><p></p><p>作者：曹犟，神策数据联合创始人 & CTO</p><p>本文由 @神策数据 发布于人人都是产品经理。未经许可，禁止转载</p><p>题图来自Unsplash，基于CC0协议</p><div class=support-author><div class=support-title>给作者打赏，鼓励TA抓紧创作！</div><button class=button--pay data-post-id=3056373 data-author=68466 data-avatar=https://image.woshipm.com/wp-files/2016/07/头像.gif><svg width=13 height=16 class=svgIcon--use viewbox="0 0 13 16"><path d="M9.113 4.571C9.951 3.771 10.895 2.742 10.685 2.057 10.475 1.485 10.056.799 9.427.571 8.903.342 8.379.456 7.75.799 7.54.342 7.016.114 6.596-.001 5.863-.001 5.234.228 4.814.914 4.08.571 3.451.685 2.927 1.028 2.613 1.256 2.298 1.713 2.298 2.628 2.298 3.542 3.137 4.228 3.766 4.685 2.508 5.599-.218 7.885-.008 12.228-.218 15.656 2.613 15.999 2.613 15.999L10.371 15.999C11.314 15.885 12.991 14.971 12.991 12.571L12.991 12.228C13.201 7.771 10.371 5.371 9.113 4.571L9.113 4.571ZM8.932 11.835 6.94 11.835 6.94 13.207C6.94 13.435 6.731 13.549 6.521 13.549 6.311 13.549 6.102 13.435 6.102 13.207L6.102 11.835 4.11 11.835C3.9 11.835 3.795 11.606 3.795 11.378 3.795 11.149 3.9 10.921 4.11 10.921L6.102 10.921 6.102 10.121 4.949 10.121C4.739 10.121 4.634 9.892 4.634 9.664 4.634 9.435 4.739 9.206 4.949 9.206L5.892 9.206 4.739 7.95C4.634 7.835 4.739 7.606 4.949 7.492 5.158 7.378 5.368 7.264 5.473 7.378L6.521 8.635 7.674 7.264C7.779 7.149 7.989 7.264 8.198 7.378 8.408 7.492 8.408 7.721 8.408 7.835L7.15 9.321 8.094 9.321C8.303 9.321 8.408 9.549 8.408 9.778 8.408 10.007 8.303 10.235 8.094 10.235L6.94 10.235 6.94 11.035 8.932 11.035C9.142 11.035 9.247 11.264 9.247 11.493 9.247 11.606 9.037 11.835 8.932 11.835L8.932 11.835Z"></path></svg>赞赏</button></div></div><div class=footer><div class=copyright><blockquote><p>博客内容遵循 署名-非商业性使用-相同方式共享 4.0 国际 (CC BY-NC-SA 4.0) 协议</p><p>本文永久链接是：<a href=https://news.zfe.space/p/a656.html>https://news.zfe.space/p/a656.html</a></p></blockquote></div></div><div class=article-meta id=bottom><div class=new-meta-box><div class="new-meta-item date" itemprop=dateUpdated datetime=2022-09-26T15:13:13+00:00><a class=notlink><i class="fas fa-edit fa-fw" aria-hidden=true></i><p>更新于：2022年9月26日</p></a></div><div class="new-meta-item share -mob-share-list"><div class="-mob-share-list share-body"><a class=-mob-share-qq rel="external nofollow noopener noreferrer noopener" target=_blank href="http://connect.qq.com/widget/shareqq/index.html?url=https://news.zfe.space/p/a656.html&title=数据治理：面临的挑战与应对策略 - 小冰 RSSHub&pics=https://image.woshipm.com/wp-files/2019/11/98UODTVcCMlFQ5OlrFAh.jpg&summary="><img src=https://cdn.jsdelivr.net/gh/volantis-x/cdn-org/logo/128/qq.png class=lazyload data-srcset=https://cdn.jsdelivr.net/gh/volantis-x/cdn-org/logo/128/qq.png srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII="></a> <a class=-mob-share-qzone rel="external nofollow noopener noreferrer noopener" target=_blank href="https://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url=https://news.zfe.space/p/a656.html&title=数据治理：面临的挑战与应对策略 - 小冰 RSSHub&pics=https://image.woshipm.com/wp-files/2019/11/98UODTVcCMlFQ5OlrFAh.jpg&summary="><img src=https://cdn.jsdelivr.net/gh/volantis-x/cdn-org/logo/128/qzone.png class=lazyload data-srcset=https://cdn.jsdelivr.net/gh/volantis-x/cdn-org/logo/128/qzone.png srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII="></a> <a class=-mob-share-weibo rel="external nofollow noopener noreferrer noopener" target=_blank href="http://service.weibo.com/share/share.php?url=https://news.zfe.space/p/a656.html&title=数据治理：面临的挑战与应对策略 - 小冰 RSSHub&pics=https://image.woshipm.com/wp-files/2019/11/98UODTVcCMlFQ5OlrFAh.jpg&summary="><img src=https://cdn.jsdelivr.net/gh/volantis-x/cdn-org/logo/128/weibo.png class=lazyload data-srcset=https://cdn.jsdelivr.net/gh/volantis-x/cdn-org/logo/128/weibo.png srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII="></a></div></div></div></div><div class=prev-next><a class=prev href=/p/c613.html><p class=title><i class="fas fa-chevron-left" aria-hidden=true></i>得到新课：《余剑峰·行为经济学》上线</p><p class=content>你好，我是余剑峰。欢迎从今天起加入清华五道口《行为经济学》课堂。清华大学五道口金融学院号称“金融界的黄埔军校”。30多年来，从这里走出的校友，形成了一个对中国现代金融发展起到重要作用的群...</p></a><a class=next href=/p/6a85.html><p class=title>发刊词 _ 纵览世界风云变幻，领略经世致用智慧<i class="fas fa-chevron-right" aria-hidden=true></i></p><p class=content>发刊词 | 纵览世界风云变幻，领略经世致用智慧</p></a></div></article></div><aside class=l_side><section class="widget toc-wrapper shadow desktop mobile" id=toc-div><header><i class="fas fa-list fa-fw" aria-hidden=true></i> <span class=name>本文目录</span></header><div class=content><ol class=toc><li class="toc-item toc-level-2"><a class=toc-link href=#toc-1><span class=toc-text>一、什么是数据治理？</span></a><ol class=toc-child><li class="toc-item toc-level-3"><a class=toc-link><span class=toc-text>1. 数据治理的本质</span></a></li><li class="toc-item toc-level-3"><a class=toc-link><span class=toc-text>2. 数据治理的重要性</span></a></li></ol></li><li class="toc-item toc-level-2"><a class=toc-link href=#toc-2><span class=toc-text>二、数据治理面临的挑战</span></a><ol class=toc-child><li class="toc-item toc-level-3"><a class=toc-link><span class=toc-text>1. 多业务系统多数据源的整合挑战</span></a></li><li class="toc-item toc-level-3"><a class=toc-link><span class=toc-text>2. 数据采集技术上的挑战</span></a></li><li class="toc-item toc-level-3"><a class=toc-link><span class=toc-text>3. 用户隐私与安全挑战</span></a></li><li class="toc-item toc-level-3"><a class=toc-link><span class=toc-text>4. 组织架构与部门隔阂带来的配合</span></a></li><li class="toc-item toc-level-3"><a class=toc-link><span class=toc-text>5.业务持续迭代中带来的挑战</span></a></li></ol></li><li class="toc-item toc-level-2"><a class=toc-link href=#toc-3><span class=toc-text>三、数据治理与组织架构</span></a><ol class=toc-child><li class="toc-item toc-level-3"><a class=toc-link><span class=toc-text>1. 数据治理是一个动态的过程</span></a></li><li class="toc-item toc-level-3"><a class=toc-link><span class=toc-text>2. 数据治理中的两个核心角色</span></a></li></ol></li><li class="toc-item toc-level-2"><a class=toc-link href=#toc-4><span class=toc-text>四、数据治理中的应对</span></a><ol class=toc-child><li class="toc-item toc-level-3"><a class=toc-link><span class=toc-text>数据治理原则 1：不要先污染后治理，要从源头控制</span></a></li><li class="toc-item toc-level-3"><a class=toc-link><span class=toc-text>数据治理原则 2：数据治理的过程要贯穿到整个业务迭代的过程中</span></a></li><li class="toc-item toc-level-3"><a class=toc-link><span class=toc-text>数据治理原则 3：以产品化、组件化的思路来解决，不能依赖于人工</span></a></li></ol></li></ol></div></section></aside><script>
  window.pdata={}
  pdata.ispage=true;
  pdata.postTitle="数据治理：面临的挑战与应对策略";
  pdata.commentPath="";
  pdata.commentPlaceholder="";
  // header 这里无论是否开启pjax都需要
  var l_header=document.getElementById("l_header");
  
  l_header.classList.add("show");
  
  
    // cover
    var cover_wrapper=document.querySelector('.cover-wrapper');
    
    cover_wrapper.id="none";
    cover_wrapper.style.display="none";
    
  
</script></div><footer class="footer clearfix"><br><br><div class=aplayer-container></div><br><div class=social-wrapper></div><div><p>博客内容遵循 <a target=_blank rel=noopener href=https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh>署名-非商业性使用-相同方式共享 4.0 国际 (CC BY-NC-SA 4.0) 协议</a></p></div><div><p><span id=lc-sv>本站总访问量为<span id=number><i class="fas fa-circle-notch fa-spin fa-fw" aria-hidden=true></i></span> 次</span> <span id=lc-uv>访客数为<span id=number><i class="fas fa-circle-notch fa-spin fa-fw" aria-hidden=true></i></span> 人</span></p></div>本站使用 <a href=https://github.com/volantis-x/hexo-theme-volantis/tree/4.3.1 target=_blank class=codename>Volantis</a> 作为主题<div class=copyright><p><a href="/">Copyright © 2017-2020 XXX</a></p></div></footer><a id=s-top class="fas fa-arrow-up fa-fw" href=javascript:void(0)></a></div></div><div><script>
/************这个文件存放不需要重载的全局变量和全局函数*********/
window.volantis={};
window.volantis.loadcss=document.getElementById("loadcss");
/******************** Pjax ********************************/
function VPjax(){
	this.list=[] // 存放回调函数
	this.start=()=>{
	  for(var i=0;i<this.list.length;i++){
		this.list[i].run();
	  }
	}
	this.push=(fn,name)=>{
		var f=new PjaxItem(fn,name);
		this.list.push(f);
	}
	// 构造一个可以run的对象
	function PjaxItem(fn,name){
		// 函数名称
		this.name = name || fn.name
		// run方法
		this.run=()=>{
			fn()
		}
	}
}
volantis.pjax={}
volantis.pjax.method={
	complete: new VPjax(),
	error: new VPjax(),
	send: new VPjax()
}
volantis.pjax={
	...volantis.pjax,
	push: volantis.pjax.method.complete.push,
	error: volantis.pjax.method.error.push,
	send: volantis.pjax.method.send.push
}
/********************脚本懒加载函数********************************/
// 已经加入了setTimeout
function loadScript(src, cb) {
	setTimeout(function() {
		var HEAD = document.getElementsByTagName('head')[0] || document.documentElement;
		var script = document.createElement('script');
		script.setAttribute('type','text/javascript');
		if (cb) script.onload = cb;
		script.setAttribute('src', src);
		HEAD.appendChild(script);
	});
}
//https://github.com/filamentgroup/loadCSS
var loadCSS = function( href, before, media, attributes ){
	var doc = window.document;
	var ss = doc.createElement( "link" );
	var ref;
	if( before ){
		ref = before;
	}
	else {
		var refs = ( doc.body || doc.getElementsByTagName( "head" )[ 0 ] ).childNodes;
		ref = refs[ refs.length - 1];
	}
	var sheets = doc.styleSheets;
	if( attributes ){
		for( var attributeName in attributes ){
			if( attributes.hasOwnProperty( attributeName ) ){
				ss.setAttribute( attributeName, attributes[attributeName] );
			}
		}
	}
	ss.rel = "stylesheet";
	ss.href = href;
	ss.media = "only x";
	function ready( cb ){
		if( doc.body ){
			return cb();
		}
		setTimeout(function(){
			ready( cb );
		});
	}
	ready( function(){
		ref.parentNode.insertBefore( ss, ( before ? ref : ref.nextSibling ) );
	});
	var onloadcssdefined = function( cb ){
		var resolvedHref = ss.href;
		var i = sheets.length;
		while( i-- ){
			if( sheets[ i ].href === resolvedHref ){
				return cb();
			}
		}
		setTimeout(function() {
			onloadcssdefined( cb );
		});
	};
	function loadCB(){
		if( ss.addEventListener ){
			ss.removeEventListener( "load", loadCB );
		}
		ss.media = media || "all";
	}
	if( ss.addEventListener ){
		ss.addEventListener( "load", loadCB);
	}
	ss.onloadcssdefined = onloadcssdefined;
	onloadcssdefined( loadCB );
	return ss;
};
</script><script>
  
  loadCSS("https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.14/css/all.min.css", window.volantis.loadcss);
  
  
  
  
</script><script src=https://cdn.jsdelivr.net/npm/jquery@3.5/dist/jquery.min.js></script><script>
  function pjax_fancybox() {
    $(".md .gallery").find("img").each(function () { //渲染 fancybox
      var element = document.createElement("a"); // a 标签
      $(element).attr("class", "fancybox");
      $(element).attr("pjax-fancybox", "");  // 过滤 pjax
      $(element).attr("href", $(this).attr("src"));
      if ($(this).attr("data-original")) {
        $(element).attr("href", $(this).attr("data-original"));
      }
      $(element).attr("data-fancybox", "images");
      var caption = "";   // 描述信息
      if ($(this).attr('alt')) {  // 判断当前页面是否存在描述信息
        $(element).attr('data-caption', $(this).attr('alt'));
        caption = $(this).attr('alt');
      }
      var div = document.createElement("div");
      $(div).addClass("fancybox");
      $(this).wrap(div); // 最外层套 div ，其实主要作用还是 class 样式
      var span = document.createElement("span");
      $(span).addClass("image-caption");
      $(span).text(caption); // 加描述
      $(this).after(span);  // 再套一层描述
      $(this).wrap(element);  // 最后套 a 标签
    })
    $(".md .gallery").find("img").fancybox({
      selector: '[data-fancybox="images"]',
      hash: false,
      loop: false,
      closeClick: true,
      helpers: {
        overlay: {closeClick: true}
      },
      buttons: [
        "zoom",
        "close"
      ]
    });
  };
  function SCload_fancybox() {
    if ($(".md .gallery").find("img").length == 0) return;
    loadCSS("https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css", document.getElementById("loadcss"));
    loadScript('https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js', pjax_fancybox)
  };
  $(function () {
    SCload_fancybox();
  });
  function Pjax_SCload_fancybox(){
	if (typeof $.fancybox == "undefined") {
	 SCload_fancybox();
    } else {
	 pjax_fancybox();
    }
  }
  volantis.pjax.push(Pjax_SCload_fancybox)
  volantis.pjax.send(()=>{
      if (typeof $.fancybox != "undefined") {
        $.fancybox.close();    // 关闭弹窗
      }
  },'fancybox')
</script><script>
  function loadIssuesJS() {
    if ($(".md").find(".issues-api").length == 0) return;
	
	  loadScript('/js/issues.js');
	
  };
  $(function () {
    loadIssuesJS();
  });
  volantis.pjax.push(()=>{
	if (typeof IssuesAPI == "undefined") {
	  loadIssuesJS();
	}
  },"IssuesJS")
</script><script defer src=https://cdn.jsdelivr.net/npm/vanilla-lazyload@17.1.0/dist/lazyload.min.js></script><script>
  // https://www.npmjs.com/package/vanilla-lazyload
  // Set the options globally
  // to make LazyLoad self-initialize
  window.lazyLoadOptions = {
    elements_selector: ".lazyload",
    threshold: 0
  };
  // Listen to the initialization event
  // and get the instance of LazyLoad
  window.addEventListener(
    "LazyLoad::Initialized",
    function (event) {
      window.lazyLoadInstance = event.detail.instance;
    },
    false
  );
  document.addEventListener('DOMContentLoaded', function () {
    lazyLoadInstance.update();
  });
  document.addEventListener('pjax:complete', function () {
    lazyLoadInstance.update();
  });
</script><script>
  window.FPConfig = {
	delay: 0,
	ignoreKeywords: [],
	maxRPS: 5,
	hoverDelay: 25
  };
</script><script defer src=https://cdn.jsdelivr.net/gh/gijo-varghese/flying-pages@2.1.2/flying-pages.min.js></script><script src=/js/valine.js></script><script>
  function emoji(path, idx, ext) {
    return path + "/" + path + "-" + idx + "." + ext;
  }
  var emojiMaps = {};
  for (var i = 1; i <= 54; i++) {
    emojiMaps['tieba-' + i] = emoji('tieba', i, 'png');
  }
  for (var i = 1; i <= 101; i++) {
    emojiMaps['qq-' + i] = emoji('qq', i, 'gif');
  }
  for (var i = 1; i <= 116; i++) {
    emojiMaps['aru-' + i] = emoji('aru', i, 'gif');
  }
  for (var i = 1; i <= 125; i++) {
    emojiMaps['twemoji-' + i] = emoji('twemoji', i, 'png');
  }
  for (var i = 1; i <= 4; i++) {
    emojiMaps['weibo-' + i] = emoji('weibo', i, 'png');
  }
  function pjax_valine() {
    if(!document.querySelectorAll("#valine_container")[0])return;
    let pagePlaceholder = pdata.commentPlaceholder || "快来评论吧~";
    let path = pdata.commentPath;
    if (path.length == 0) {
      let defaultPath = '';
      path = defaultPath || decodeURI(window.location.pathname);
    }
    var valine = new Valine();
    valine.init(Object.assign({"path":null,"placeholder":"快来评论吧~","appId":null,"appKey":null,"meta":["nick","mail","link"],"requiredFields":["nick","mail"],"enableQQ":true,"recordIP":false,"avatar":"robohash","pageSize":10,"lang":"zh-cn","highlight":true,"mathJax":false}, {
      el: '#valine_container',
      path: path,
      placeholder: pagePlaceholder,
      emojiCDN: 'https://cdn.jsdelivr.net/gh/volantis-x/cdn-emoji/valine/',
      emojiMaps: emojiMaps,
    }))
  }
  $(function () {
    pjax_valine();
  });
  volantis.pjax.push(pjax_valine);
</script><script src=/js/app.js></script><script>
const SearchServiceimagePath="https://cdn.jsdelivr.net/gh/volantis-x/cdn-volantis@master/img/";
const ROOT =  ("/" || "/").endsWith('/') ? ("/" || "/") : ("//" || "/" );

$('.input.u-search-input').one('focus',function(){
	
		loadScript('/js/search/hexo.js',setSearchService);
	
})

function listenSearch(){
  
    customSearch = new HexoSearch({
      imagePath: SearchServiceimagePath
    });
  
}
function setSearchService() {
	listenSearch();
	
}
</script><script defer>

  const LCCounter = {
    app_id: 'u9j57bwJod4EDmXWdxrwuqQT-MdYXbMMI',
    app_key: 'jfHtEKVE24j0IVCGHbvuFClp',
    custom_api_server: '',

    // 查询存储的记录
    getRecord(Counter, url, title) {
      return new Promise(function (resolve, reject) {
        Counter('get', '/classes/Counter?where=' + encodeURIComponent(JSON.stringify({url})))
          .then(resp => resp.json())
          .then(({results, code, error}) => {
            if (code === 401) {
              throw error;
            }
            if (results && results.length > 0) {
              var record = results[0];
              resolve(record);
            } else {
              Counter('post', '/classes/Counter', {url, title: title, times: 0})
                .then(resp => resp.json())
                .then((record, error) => {
                  if (error) {
                    throw error;
                  }
                  resolve(record);
                }).catch(error => {
                console.error('Failed to create', error);
                reject(error);
              });
            }
          }).catch((error) => {
          console.error('LeanCloud Counter Error:', error);
          reject(error);
        });
      })
    },

    // 发起自增请求
    increment(Counter, incrArr) {
      return new Promise(function (resolve, reject) {
        Counter('post', '/batch', {
          "requests": incrArr
        }).then((res) => {
          res = res.json();
          if (res.error) {
            throw res.error;
          }
          resolve(res);
        }).catch((error) => {
          console.error('Failed to save visitor count', error);
          reject(error);
        });
      });
    },

    // 构建自增请求体
    buildIncrement(objectId) {
      return {
        "method": "PUT",
        "path": `/1.1/classes/Counter/${ objectId }`,
        "body": {
          "times": {
            '__op': 'Increment',
            'amount': 1
          }
        }
      }
    },

    // 校验是否为有效的 UV
    validUV() {
      var key = 'LeanCloudUVTimestamp';
      var flag = localStorage.getItem(key);
      if (flag) {
        // 距离标记小于 24 小时则不计为 UV
        if (new Date().getTime() - parseInt(flag) <= 86400000) {
          return false;
        }
      }
      localStorage.setItem(key, new Date().getTime().toString());
      return true;
    },

    addCount(Counter) {
      var enableIncr = '' === 'true' && window.location.hostname !== 'localhost';
      enableIncr = true;
      var getterArr = [];
      var incrArr = [];
      // 请求 PV 并自增
      var pvCtn = document.querySelector('#lc-sv');
      if (pvCtn || enableIncr) {
        var pvGetter = this.getRecord(Counter, 'https://news.zfe.space' + '/#lc-sv', 'Visits').then((record) => {
          incrArr.push(this.buildIncrement(record.objectId))
          var eles = document.querySelectorAll('#lc-sv #number');
          if (eles.length > 0) {
            eles.forEach((el,index,array)=>{
              el.innerText = record.times + 1;
              if (pvCtn) {
                pvCtn.style.display = 'inline';
              }
            })
          }
        });
        getterArr.push(pvGetter);
      }

      // 请求 UV 并自增
      var uvCtn = document.querySelector('#lc-uv');
      if (uvCtn || enableIncr) {
        var uvGetter = this.getRecord(Counter, 'https://news.zfe.space' + '/#lc-uv', 'Visitors').then((record) => {
          var vuv = this.validUV();
          vuv && incrArr.push(this.buildIncrement(record.objectId))
          var eles = document.querySelectorAll('#lc-uv #number');
          if (eles.length > 0) {
            eles.forEach((el,index,array)=>{
              el.innerText = record.times + (vuv ? 1 : 0);
              if (uvCtn) {
                uvCtn.style.display = 'inline';
              }
            })
          }
        });
        getterArr.push(uvGetter);
      }

      // 请求文章的浏览数，如果是当前页面就自增
      var allPV = document.querySelectorAll('#lc-pv');
      if (allPV.length > 0 || enableIncr) {
        for (i = 0; i < allPV.length; i++) {
          let pv = allPV[i];
          let title = pv.getAttribute('data-title');
          var url = 'https://news.zfe.space' + pv.getAttribute('data-path');
          if (url) {
            var viewGetter = this.getRecord(Counter, url, title).then((record) => {
              // 是当前页面就自增
              let curPath = window.location.pathname;
              if (curPath.includes('index.html')) {
                curPath = curPath.substring(0, curPath.lastIndexOf('index.html'));
              }
              if (pv.getAttribute('data-path') == curPath) {
                incrArr.push(this.buildIncrement(record.objectId));
              }
              if (pv) {
                var ele = pv.querySelector('#lc-pv #number');
                if (ele) {
                  if (pv.getAttribute('data-path') == curPath) {
                    ele.innerText = (record.times || 0) + 1;
                  } else {
                    ele.innerText = record.times || 0;
                  }
                  pv.style.display = 'inline';
                }
              }
            });
            getterArr.push(viewGetter);
          }
        }
      }

      // 如果启动计数自增，批量发起自增请求
      if (enableIncr) {
        Promise.all(getterArr).then(() => {
          incrArr.length > 0 && this.increment(Counter, incrArr);
        })
      }

    },


    fetchData(api_server) {
      var Counter = (method, url, data) => {
        return fetch(`${ api_server }/1.1${ url }`, {
          method,
          headers: {
            'X-LC-Id': this.app_id,
            'X-LC-Key': this.app_key,
            'Content-Type': 'application/json',
          },
          body: JSON.stringify(data)
        });
      };
      this.addCount(Counter);
    },

    refreshCounter() {
      var api_server = this.app_id.slice(-9) !== '-MdYXbMMI' ? this.custom_api_server : `https://${ this.app_id.slice(0, 8).toLowerCase() }.api.lncldglobal.com`;
      if (api_server) {
        this.fetchData(api_server);
      } else {
        fetch('https://app-router.leancloud.cn/2/route?appId=' + this.app_id)
          .then(resp => resp.json())
          .then(({api_server}) => {
            this.fetchData('https://' + api_server);
          });
      }
    }

  };

  LCCounter.refreshCounter();

  document.addEventListener('pjax:complete', function () {
    LCCounter.refreshCounter();
  });
</script><script>
const rootElement = document.documentElement;
const darkModeStorageKey = "user-color-scheme";
const rootElementDarkModeAttributeName = "data-user-color-scheme";

const setLS = (k, v) => {
    localStorage.setItem(k, v);
};

const removeLS = (k) => {
    localStorage.removeItem(k);
};

const getLS = (k) => {
    return localStorage.getItem(k);
};

const getModeFromCSSMediaQuery = () => {
  return window.matchMedia("(prefers-color-scheme: dark)").matches
    ? "dark"
    : "light";
};

const resetRootDarkModeAttributeAndLS = () => {
  rootElement.removeAttribute(rootElementDarkModeAttributeName);
  removeLS(darkModeStorageKey);
};

const validColorModeKeys = {
  dark: true,
  light: true,
};

const applyCustomDarkModeSettings = (mode) => {
  const currentSetting = mode || getLS(darkModeStorageKey);

  if (currentSetting === getModeFromCSSMediaQuery()) {
    resetRootDarkModeAttributeAndLS();
  } else if (validColorModeKeys[currentSetting]) {
    rootElement.setAttribute(rootElementDarkModeAttributeName, currentSetting);
  } else {
    resetRootDarkModeAttributeAndLS();
  }
};

const invertDarkModeObj = {
  dark: "light",
  light: "dark",
};

/**
 * get target mode
 */
const toggleCustomDarkMode = () => {
  let currentSetting = getLS(darkModeStorageKey);

  if (validColorModeKeys[currentSetting]) {
    currentSetting = invertDarkModeObj[currentSetting];
  } else if (currentSetting === null) {
    currentSetting = invertDarkModeObj[getModeFromCSSMediaQuery()];
  } else {
    return;
  }
  setLS(darkModeStorageKey, currentSetting);
  return currentSetting;
};

/**
 * bind click event for toggle button
 */
var btn=$("#wrapper .toggle-mode-btn,#rightmenu-wrapper .toggle-mode-btn");
function bindToggleButton() {
    btn.on('click',(e) => {
      const mode = toggleCustomDarkMode();
      applyCustomDarkModeSettings(mode);
    });
}

applyCustomDarkModeSettings();
document.addEventListener("DOMContentLoaded", bindToggleButton);
volantis.pjax.push(bindToggleButton);
volantis.pjax.send(()=>{
	btn.unbind('click');
},'toggle-mode-btn-unbind');
</script><script>
function listennSidebarTOC() {
  const navItems = document.querySelectorAll(".toc li");
  if (!navItems.length) return;
  const sections = [...navItems].map((element) => {
    const link = element.querySelector(".toc-link");
    const target = document.getElementById(
      decodeURI(link.getAttribute("href")).replace("#", "")
    );
    link.addEventListener("click", (event) => {
      event.preventDefault();
      window.scrollTo({
		top: target.offsetTop + 100,
		
		behavior: "smooth"
		
	  });
    });
    return target;
  });

  function activateNavByIndex(target) {
    if (target.classList.contains("active-current")) return;

    document.querySelectorAll(".toc .active").forEach((element) => {
      element.classList.remove("active", "active-current");
    });
    target.classList.add("active", "active-current");
    let parent = target.parentNode;
    while (!parent.matches(".toc")) {
      if (parent.matches("li")) parent.classList.add("active");
      parent = parent.parentNode;
    }
  }

  function findIndex(entries) {
    let index = 0;
    let entry = entries[index];
    if (entry.boundingClientRect.top > 0) {
      index = sections.indexOf(entry.target);
      return index === 0 ? 0 : index - 1;
    }
    for (; index < entries.length; index++) {
      if (entries[index].boundingClientRect.top <= 0) {
        entry = entries[index];
      } else {
        return sections.indexOf(entry.target);
      }
    }
    return sections.indexOf(entry.target);
  }

  function createIntersectionObserver(marginTop) {
    marginTop = Math.floor(marginTop + 10000);
    let intersectionObserver = new IntersectionObserver(
      (entries, observe) => {
        let scrollHeight = document.documentElement.scrollHeight + 100;
        if (scrollHeight > marginTop) {
          observe.disconnect();
          createIntersectionObserver(scrollHeight);
          return;
        }
        let index = findIndex(entries);
        activateNavByIndex(navItems[index]);
      },
      {
        rootMargin: marginTop + "px 0px -100% 0px",
        threshold: 0,
      }
    );
    sections.forEach((element) => {
      element && intersectionObserver.observe(element);
    });
  }
  createIntersectionObserver(document.documentElement.scrollHeight);
}

document.addEventListener("DOMContentLoaded", listennSidebarTOC);
document.addEventListener("pjax:success", listennSidebarTOC);
</script><script src=https://cdn.jsdelivr.net/npm/pjax@0.2.8/pjax.min.js></script><script>
    var pjax;
    document.addEventListener('DOMContentLoaded', function () {
      pjax = new Pjax({
        elements: 'a[href]:not([href^="#"]):not([href="javascript:void(0)"]):not([pjax-fancybox])',
        selectors: [
          "title",
          
          "#pjax-container",
          "#pjax-header-nav-list"
        ],
        cacheBust: false,   // url 地址追加时间戳，用以避免浏览器缓存
        timeout: 5000
      });
    });

    document.addEventListener('pjax:send', function (e) {
      //window.stop(); // 相当于点击了浏览器的停止按钮

      try {
        var currentUrl = window.location.pathname;
        var targetUrl = e.triggerElement.href;
        var banUrl = [""];
        if (banUrl[0] != "") {
          banUrl.forEach(item => {
            if(currentUrl.indexOf(item) != -1 || targetUrl.indexOf(item) != -1) {
              window.location.href = targetUrl;
            }
          });
        }
      } catch (error) {}

      window.subData = null; // 移除标题（用于一二级导航栏切换处）

      volantis.$switcher.removeClass('active'); // 关闭移动端激活的搜索框
      volantis.$header.removeClass('z_search-open'); // 关闭移动端激活的搜索框
      volantis.$wrapper.removeClass('sub'); // 跳转页面时关闭二级导航

      // 解绑事件 避免重复监听
      volantis.$topBtn.unbind('click');
      $('.menu a').unbind('click');
      $(window).unbind('resize');
      $(window).unbind('scroll');
      $(document).unbind('scroll');
      $(document).unbind('click');
      $('body').unbind('click');
	  // 使用 volantis.pjax.send 方法传入pjax:send回调函数 参见layout/_partial/scripts/global.ejs
	  volantis.pjax.method.send.start();
    });

    document.addEventListener('pjax:complete', function () {
      $('.nav-main').find('.list-v').not('.menu-phone').removeAttr("style",""); // 移除小尾巴的移除
      $('.menu-phone.list-v').removeAttr("style",""); // 移除小尾巴的移除
      $('script[data-pjax], .pjax-reload script').each(function () {
        $(this).parent().append($(this).remove());
      });
      try{
		// 使用 volantis.pjax.push 方法传入重载函数 参见layout/_partial/scripts/global.ejs
		volantis.pjax.method.complete.start();
      } catch (e) {
        console.log(e);
      }
    });

    document.addEventListener('pjax:error', function (e) {
	  // 使用 volantis.pjax.error 方法传入pjax:error回调函数 参见layout/_partial/scripts/global.ejs
	  volantis.pjax.method.error.start();
      window.location.href = e.triggerElement.href;
    });
</script></div></body></html>